<!DOCTYPE html>
<html lang="en">
<head>
  <title>Python Portfolio Suggestion Engine</title>
  <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='styles.css') }}">
</head>
<body>
  <h1>
    Python Portfolio Suggestion
  </h1>

  {% if errors|length == 0 %}
    <h3>Current Stock Price</h3>
    <table class="resulttable">
      <tr class="resultrow">
        <th class="resultcell">Stock</th>
        <th class="resultcell">Current Price</th>
      </tr>
      {% for stock in data %}
        <tr class="resultrow">
          <td class="resultcell">{{stock}}</td>
          <td class="resultcell">${{'{:.2f}'.format(data[stock][-1]['close'])}}</td>
        </tr>
      {% endfor %}
    </table>
    <hr>
    <h3>If purchase today with ${{'{:.2f}'.format(amount)}}</h3>
    <table class="resulttable">
      <tr class="resultrow">
        <th class="resultcell">Stock</th>
        <th class="resultcell">Distribution</th>
        <th class="resultcell">Amount Distributed</th>
        <th class="resultcell">Share Purchased</th>
      </tr>
      {% for stock in purchase_now %}
        <tr class="resultrow">
          <td class="resultcell">{{stock}}</td>
          <td class="resultcell">{{'{:.2f}'.format(purchase_now[stock]['distribution'])}}%</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_now[stock]['amt_dist'])}}</td>
          <td class="resultcell">{{purchase_now[stock]['share']}}</td>
        </tr>
      {% endfor %}
    </table>
    <hr>
    <h3>If purchase 5 business days ago with ${{'{:.2f}'.format(amount)}}</h3>
    <table class="resulttable">
      <tr class="resultrow">
        <th class="resultcell">Stock</th>
        <th class="resultcell">Purchase Price</th>
        <th class="resultcell">Distribution</th>
        <th class="resultcell">Amount Distributed</th>
        <th class="resultcell">Share Purchased</th>
        <th class="resultcell">Current Price</th>
        <th class="resultcell">Current Value</th>
      </tr>
      {% for stock in purchase_5 %}
        <tr class="resultrow">
          <td class="resultcell">{{stock}}</td>
          <td class="resultcell">{{'{:.2f}'.format(purchase_5[stock]['old_price'])}}</td>
          <td class="resultcell">{{'{:.2f}'.format(purchase_5[stock]['distribution'])}}%</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_5[stock]['amt_dist'])}}</td>
          <td class="resultcell">{{purchase_5[stock]['share']}}</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_5[stock]['cur_price'])}}</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_5[stock]['cur_value'])}}</td>
        </tr>
      {% endfor %}
      <tr class="resultrow">
        <th class="resultcell colspan" colspan="6">Total Value</td>
        <td class="resultcell">${{'{:.2f}'.format(total_5)}}</td>
      </tr>
      <tr class="resultrow">
        <th class="resultcell colspan" colspan="6">Total Gain</td>
        <td class="resultcell">${{'{:.2f}'.format(profit_5)}} ({{'{:.2f}'.format(percent_5)}}%)</td>
      </tr>
    </table>
    <hr>
    <h3>If purchase 10 business days ago with ${{'{:.2f}'.format(amount)}}</h3>
    <table class="resulttable">
      <tr class="resultrow">
        <th class="resultcell">Stock</th>
        <th class="resultcell">Purchase Price</th>
        <th class="resultcell">Distribution</th>
        <th class="resultcell">Amount Distributed</th>
        <th class="resultcell">Share Purchased</th>
        <th class="resultcell">Current Price</th>
        <th class="resultcell">Current Value</th>
      </tr>
      {% for stock in purchase_10 %}
        <tr class="resultrow">
          <td class="resultcell">{{stock}}</td>
          <td class="resultcell">{{'{:.2f}'.format(purchase_10[stock]['old_price'])}}</td>
          <td class="resultcell">{{'{:.2f}'.format(purchase_10[stock]['distribution'])}}%</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_10[stock]['amt_dist'])}}</td>
          <td class="resultcell">{{purchase_10[stock]['share']}}</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_10[stock]['cur_price'])}}</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_10[stock]['cur_value'])}}</td>
        </tr>
      {% endfor %}
      <tr class="resultrow">
        <th class="resultcell colspan" colspan="6">Total Value</td>
        <td class="resultcell">${{'{:.2f}'.format(total_10)}}</td>
      </tr>
      <tr class="resultrow">
        <th class="resultcell colspan" colspan="6">Total Gain</td>
        <td class="resultcell">${{'{:.2f}'.format(profit_10)}} ({{'{:.2f}'.format(percent_10)}}%)</td>
      </tr>
    </table>
    <hr>
    <h3>If purchase 20 business days ago with ${{'{:.2f}'.format(amount)}}</h3>
    <table class="resulttable">
      <tr class="resultrow">
        <th class="resultcell">Stock</th>
        <th class="resultcell">Purchase Price</th>
        <th class="resultcell">Distribution</th>
        <th class="resultcell">Amount Distributed</th>
        <th class="resultcell">Share Purchased</th>
        <th class="resultcell">Current Price</th>
        <th class="resultcell">Current Value</th>
      </tr>
      {% for stock in purchase_20 %}
        <tr class="resultrow">
          <td class="resultcell">{{stock}}</td>
          <td class="resultcell">{{'{:.2f}'.format(purchase_20[stock]['old_price'])}}</td>
          <td class="resultcell">{{'{:.2f}'.format(purchase_20[stock]['distribution'])}}%</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_20[stock]['amt_dist'])}}</td>
          <td class="resultcell">{{purchase_20[stock]['share']}}</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_20[stock]['cur_price'])}}</td>
          <td class="resultcell">${{'{:.2f}'.format(purchase_20[stock]['cur_value'])}}</td>
        </tr>
      {% endfor %}
      <tr class="resultrow">
        <th class="resultcell colspan" colspan="6">Total Value</td>
        <td class="resultcell">${{'{:.2f}'.format(total_20)}}</td>
      </tr>
      <tr class="resultrow">
        <th class="resultcell colspan" colspan="6">Total Gain</td>
        <td class="resultcell">${{'{:.2f}'.format(profit_20)}} ({{'{:.2f}'.format(percent_20)}}%)</td>
      </tr>
    </table>
  {% else %}
    <p>
      Please fix the following error(s):
      <ul class="error">
        {% for error in errors %}
          <li>{{error}}</li>
        {% endfor %}
      </ul>
    </p>
  {% endif %}
  <p><a href="{{ url_for('index') }}">Back</a></p>
</body>
</html>
